{"version":3,"sources":["assets/Scripts/event_listener.ts"],"names":[],"mappings":";;;;;;AAAA;IAAA;QAGY,cAAS,GAA8D,EAAE,CAAC;IAuCtF,CAAC;IArCU,0BAAE,GAAT,UAAU,SAAiB,EAAE,QAAkB,EAAE,MAAY;QACzD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YAC3C,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;SAClC;QAED,IAAM,QAAQ,GAAG;YACb,IAAI,EAAE,QAAQ;YACd,MAAM,EAAE,MAAM;SACjB,CAAC;QACF,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC7C,CAAC;IAEM,4BAAI,GAAX,UAAY,SAAiB;QAAE,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,6BAAc;;QACzC,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YAC1C,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpC,IAAM,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;gBAC3B,IAAI,QAAQ,CAAC,IAAI,EAAE;oBACf,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;iBAC9C;qBAAM;oBACH,EAAE,CAAC,IAAI,CAAC,iFAAwB,SAAW,CAAC,CAAC;iBAChD;aACJ;SACJ;IACL,CAAC;IAEM,2BAAG,GAAV,UAAW,SAAiB,EAAE,MAAW;QACrC,IAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YAC1C,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACzC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,EAAE;oBAC7B,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACpB,CAAC,EAAE,CAAC;iBACP;aACJ;SACJ;IACL,CAAC;IAxCM,sBAAQ,GAAmB,IAAI,aAAa,EAAE,CAAC;IAyC1D,oBAAC;CA1CD,AA0CC,IAAA;kBA1CoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["export default class EventListener {\n    static instance : EventListener = new EventListener();\n    \n    private _eventMap: { [key: string]: Array<{ func: Function, target: any }> } = {};\n\n    public on(eventType: string, callback: Function, target?: any): void {\n        if (!this._eventMap.hasOwnProperty(eventType)) {\n            this._eventMap[eventType] = [];\n        }\n        \n        const eventObj = {\n            func: callback,\n            target: target\n        };\n        this._eventMap[eventType].push(eventObj);\n    }\n\n    public fire(eventType: string, ...args: any[]): void {\n        if (this._eventMap.hasOwnProperty(eventType)) {\n            const events = this._eventMap[eventType];\n            for (let i = 0; i < events.length; i++) {\n                const eventObj = events[i];\n                if (eventObj.func) {\n                    eventObj.func.apply(eventObj.target, args);\n                } else {\n                    cc.warn(`[Warn] 没有对应的回调事件类型 - ${eventType}`);\n                }\n            }\n        }\n    }\n\n    public off(eventType: string, target: any): void {\n        if (this._eventMap.hasOwnProperty(eventType)) {\n            const events = this._eventMap[eventType];\n            for (let i = 0; i < events.length; i++) {\n                if (events[i].target === target) {\n                    events.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n    }\n}"]}