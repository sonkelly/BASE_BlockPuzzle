{"version":3,"sources":["assets/Scripts/CCEngine.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class CCEngine extends cc.Component {\n    private mAutoCloseTimeout: number = 0;\n    private autoCloseInterval: any = null;\n    private hideShareClose: number = 0;\n    private rootNode: cc.Node = null;\n\n    public closeToYou(): void {\n        if (this.rootNode) {\n            this.rootNode.removeFromParent();\n        }\n        if (this.autoCloseInterval) {\n            clearInterval(this.autoCloseInterval);\n        }\n    }\n\n    public createChaping(data: any, closeCallback?: Function, clickCallback?: Function): cc.Node {\n        const imgUrl = data.imgUrlList && data.imgUrlList[0] ? data.imgUrlList[0] : \n                      data.iconUrlList && data.iconUrlList[0] ? data.iconUrlList[0] : null;\n        const source = data.source;\n        const title = data.title;\n\n        const rootNode = new cc.Node();\n        rootNode.width = 10 * cc.winSize.width;\n        rootNode.height = 10 * cc.winSize.height;\n        rootNode.parent = cc.director.getScene();\n        rootNode.zIndex = cc.macro.MAX_ZINDEX;\n        rootNode.group = (window as any).lplatform.params.uiGroup;\n\n        const clickHandler = (): void => {\n            console.log(\"ad click\");\n            if (clickCallback) clickCallback();\n            rootNode.removeFromParent();\n            (window as any).onClickAdCallback = null;\n        };\n\n        const closeHandler = (event: cc.Event.EventTouch): void => {\n            console.log(\"closeBtn click\");\n            event.stopPropagation();\n            if (closeCallback) closeCallback();\n            rootNode.removeFromParent();\n            (window as any).onClickAdCallback = null;\n        };\n\n        const container = new cc.Node();\n        container.parent = rootNode;\n        const minSize = Math.min(cc.winSize.width, cc.winSize.height);\n        container.width = 0.8 * minSize;\n        container.height = 9 * container.width / 16;\n        container.x = cc.winSize.width / 2;\n        container.y = cc.winSize.height / 2 - 1.2 * container.height;\n        container.on(\"touchend\", clickHandler);\n\n        const texture = new cc.Texture2D();\n        texture.initWithData(new Uint8Array([0, 0, 0]), cc.Texture2D.PixelFormat.RGB888, 1, 1);\n        \n        const sprite = container.addComponent(cc.Sprite);\n        sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\n        sprite.spriteFrame = new cc.SpriteFrame(texture);\n\n        if (imgUrl) {\n            if (cc.assetManager && (cc.assetManager as any).loadRemote) {\n                (cc.assetManager as any).loadRemote(imgUrl, { ext: \".jpg\" }, (err: Error, tex: cc.Texture2D) => {\n                    if (err || !tex) {\n                        console.log(\"加载失败，ext .jpg, 尝试png\");\n                        (cc.assetManager as any).loadRemote(imgUrl, { ext: \".png\" }, (err2: Error, tex2: cc.Texture2D) => {\n                            if (err2 || !tex2) {\n                                console.log(\"加载失败，ext .png\");\n                            } else if (sprite) {\n                                sprite.spriteFrame = new cc.SpriteFrame(tex2);\n                            }\n                        });\n                    } else if (sprite) {\n                        sprite.spriteFrame = new cc.SpriteFrame(tex);\n                    }\n                });\n            } else {\n                cc.loader.load({ url: imgUrl, type: \"image\" }, (err: Error, tex: cc.Texture2D) => {\n                    if (err) {\n                        console.log(err);\n                    } else if (sprite) {\n                        sprite.spriteFrame = new cc.SpriteFrame(tex);\n                    }\n                });\n            }\n        }\n\n        (window as any).ClickAdCallback = clickHandler;\n\n        const adTag = new cc.Node();\n        adTag.parent = container;\n        adTag.width = 83;\n        adTag.height = 31;\n        adTag.x = -container.width / 2 + adTag.width / 2;\n        adTag.y = -container.height / 2 + adTag.height / 2;\n        \n        const adTagSprite = adTag.addComponent(cc.Sprite);\n        cc.loader.loadRes(\"nativeAD/native_1.png\", (err: Error, tex: cc.Texture2D) => {\n            if (err) {\n                console.log(err);\n            } else {\n                adTagSprite.spriteFrame = new cc.SpriteFrame(tex);\n            }\n        });\n\n        const closeBtn = new cc.Node();\n        closeBtn.parent = container;\n        closeBtn.width = 50;\n        closeBtn.height = 50;\n        closeBtn.x = container.width / 2 - closeBtn.width / 2;\n        closeBtn.y = container.height / 2 - closeBtn.height / 2;\n        closeBtn.on(\"touchend\", closeHandler);\n\n        const lplatform = (window as any).lplatform;\n        lplatform.plog(\"lplatform.labData.closeBtnScale:\" + lplatform.cparam.closeBtnScale + \" \");\n        if (lplatform.labData.closeBtnScale != null) {\n            closeBtn.scale = lplatform.labData.closeBtnScale;\n        }\n\n        const closeIcon = new cc.Node();\n        closeIcon.parent = container;\n        closeIcon.width = 50;\n        closeIcon.height = 50;\n        closeIcon.x = container.width / 2 - closeIcon.width / 2;\n        closeIcon.y = container.height / 2 - closeIcon.height / 2;\n        \n        const closeIconSprite = closeIcon.addComponent(cc.Sprite);\n        closeIconSprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\n        cc.loader.loadRes(\"nativeAD/native_3.png\", (err: Error, tex: cc.Texture2D) => {\n            if (err) {\n                console.log(err);\n            } else if (closeIconSprite) {\n                closeIconSprite.spriteFrame = new cc.SpriteFrame(tex);\n            }\n        });\n\n        if (source && source !== \"undefined\") {\n            const sourceLabelNode = new cc.Node();\n            sourceLabelNode.x = container.width / 2;\n            sourceLabelNode.y = -container.height / 2;\n            sourceLabelNode.anchorX = 1;\n            sourceLabelNode.anchorY = 0;\n            sourceLabelNode.parent = container;\n            sourceLabelNode.addComponent(cc.Label).string = source;\n        }\n\n        if (title && title !== \"undefined\") {\n            const titleLabelNode = new cc.Node();\n            titleLabelNode.x = 0;\n            titleLabelNode.y = -container.height / 2;\n            titleLabelNode.anchorY = 0;\n            titleLabelNode.parent = container;\n            titleLabelNode.addComponent(cc.Label).string = title;\n        }\n\n        return rootNode;\n    }\n\n    public CreateShareK(\n        confirmCallback?: Function, \n        closeCallback?: Function, \n        screenshotTexture?: cc.Texture2D, \n        autoCloseTime: number = 0, \n        showAd: boolean = false\n    ): cc.Node {\n        const systemInfo = (window as any).lplatform.systemInfo;\n        const visibleSize = cc.view.getVisibleSize();\n        const rootNode = new cc.Node();\n        \n        this.rootNode = rootNode;\n        rootNode.x = 0.5 * visibleSize.width;\n        rootNode.y = 0.5 * visibleSize.height;\n        rootNode.parent = cc.director.getScene();\n        rootNode.zIndex = cc.macro.MAX_ZINDEX;\n        rootNode.setContentSize(cc.winSize);\n        rootNode.group = (window as any).lplatform.params.uiGroup;\n\n        if (screenshotTexture) {\n            const screenshotNode = new cc.Node();\n            screenshotNode.zIndex = 1;\n            screenshotNode.width = visibleSize.width;\n            screenshotNode.height = visibleSize.height;\n            screenshotNode.parent = rootNode;\n\n            const lGlobal = (window as any).lGlobal;\n            const capturedTexture = lGlobal.nodeShot(screenshotNode, screenshotTexture, null);\n            const spriteFrame = new cc.SpriteFrame(capturedTexture);\n            spriteFrame.setFlipY(true);\n            screenshotNode.addComponent(cc.Sprite).spriteFrame = spriteFrame;\n            \n            cc.tween(screenshotNode).to(0.5, {\n                width: 691.5,\n                height: 847.5,\n                x: 0,\n                y: 112\n            }).start();\n        }\n\n        const mask = new cc.Node();\n        mask.parent = rootNode;\n        mask.opacity = 120;\n        mask.scale = 1000;\n        cc.loader.loadRes(\"fenxiang/mask.png\", (err: Error, tex: cc.Texture2D) => {\n            mask.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\n        });\n\n        rootNode.on(\"touchstart\", () => {}, this, true);\n        rootNode.on(\"touchend\", () => {}, this, true);\n\n        const sharePanel = new cc.Node();\n        sharePanel.parent = rootNode;\n        sharePanel.x = 0;\n        sharePanel.y = 0;\n        sharePanel.scale = 1.5;\n        sharePanel.zIndex = 2;\n        cc.loader.loadRes(\"fenxiang/share.png\", (err: Error, tex: cc.Texture2D) => {\n            sharePanel.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\n        });\n\n        const confirmBtn = new cc.Node();\n        confirmBtn.parent = sharePanel;\n        confirmBtn.x = 0;\n        confirmBtn.scale = 0.9;\n        confirmBtn.y = -295;\n        cc.loader.loadRes(\"fenxiang/queding.png\", (err: Error, tex: cc.Texture2D) => {\n            confirmBtn.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\n        });\n        confirmBtn.on(cc.Node.EventType.TOUCH_END, () => {\n            if (confirmCallback) confirmCallback();\n            rootNode.removeFromParent();\n        });\n\n        const closeBtn = new cc.Node();\n        closeBtn.parent = sharePanel;\n        if (systemInfo.windowWidth > systemInfo.windowHeight) {\n            closeBtn.x = 290;\n            closeBtn.y = 190;\n        } else {\n            closeBtn.x = 190;\n            closeBtn.y = 310;\n        }\n        closeBtn.scale = 1;\n        cc.loader.loadRes(\"fenxiang/close.png\", (err: Error, tex: cc.Texture2D) => {\n            closeBtn.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\n        });\n\n        const autoCloseLabelNode = new cc.Node();\n        autoCloseLabelNode.parent = sharePanel;\n        autoCloseLabelNode.x = 0;\n        autoCloseLabelNode.y = -240;\n        autoCloseLabelNode.color = cc.color(3, 35, 79, 255);\n        \n        const autoCloseLabel = autoCloseLabelNode.addComponent(cc.Label);\n        autoCloseLabel.string = \"秒自动关闭\";\n\n        if (autoCloseTime > 0) {\n            autoCloseLabelNode.active = true;\n            this.mAutoCloseTimeout = autoCloseTime;\n            this.autoCloseInterval = setInterval(() => {\n                this.mAutoCloseTimeout -= 0.016;\n                autoCloseLabel.string = Math.ceil(this.mAutoCloseTimeout) + \"秒自动关闭\";\n                if (this.mAutoCloseTimeout <= 0) {\n                    if (this.autoCloseInterval) {\n                        clearInterval(this.autoCloseInterval);\n                    }\n                    console.log(\"auto close\");\n                    if (closeCallback) closeCallback();\n                    rootNode.removeFromParent();\n                }\n            }, 16);\n        } else {\n            autoCloseLabelNode.active = false;\n        }\n\n        this.hideShareClose = (window as any).lplatform.cparam.hideShareClose;\n        if (Math.random() <= this.hideShareClose) {\n            closeBtn.active = false;\n        } else {\n            closeBtn.scale = 0;\n            const delay = cc.delayTime(1);\n            const scaleOut = cc.scaleTo(0.3, 10, 10).easing(cc.easeBackOut());\n            const scaleIn = cc.scaleTo(0.3, 1, 1).easing(cc.easeBackOut());\n            closeBtn.runAction(cc.sequence(delay, scaleOut, scaleIn));\n        }\n\n        closeBtn.on(cc.Node.EventType.TOUCH_END, () => {\n            console.log(\"closeBtn click closeShare\");\n            if (closeCallback) closeCallback();\n            rootNode.removeFromParent();\n            if (this.autoCloseInterval) {\n                clearInterval(this.autoCloseInterval);\n            }\n        });\n\n        sharePanel.opacity = 0;\n        cc.tween(sharePanel).delay(0.3).to(0.4, { opacity: 255 }).start();\n\n        if (showAd && systemInfo.platform !== \"ios\") {\n            const adNode = new cc.Node();\n            adNode.parent = rootNode;\n            adNode.x = -0.5 * visibleSize.width;\n            adNode.y = 0.5 * visibleSize.height;\n            adNode.anchorX = 0;\n            adNode.anchorY = 1;\n            cc.loader.loadRes(\"fenxiang/adlist.png\", (err: Error, tex: cc.Texture2D) => {\n                adNode.addComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\n                const moveOut = cc.moveTo(6, cc.v2(-0.5 * visibleSize.width - 1000 + visibleSize.width, 0.5 * visibleSize.height));\n                const moveIn = cc.moveTo(6, cc.v2(-0.5 * visibleSize.width, 0.5 * visibleSize.height));\n                adNode.runAction(cc.repeatForever(cc.sequence(moveOut, moveIn)));\n            });\n            adNode.on(cc.Node.EventType.TOUCH_END, () => {\n                (window as any).lplatform.goToGameOrGameList(null);\n            });\n        }\n\n        return rootNode;\n    }\n\n    public getCanvas(): HTMLCanvasElement {\n        return cc.game.canvas;\n    }\n}"]}