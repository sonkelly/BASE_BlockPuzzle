{"version":3,"sources":["assets/Scripts/layerReborn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\nimport { MODE, GameMode } from \"./Property\";\nimport { GameData } from \"./GameData\";\nimport Utils from \"./Utils\";\nimport clientEvent from \"./clientEvent\";\nimport AudioManager from \"./AudioManager\";\nimport { CHANNEL } from \"./PlatformA\";\nimport EventManager from \"./EventManager\";\nimport Common from \"./Common\";\n\n@ccclass\nexport default class LayerReborn extends cc.Component {\n    @property(dragonBones.ArmatureDisplay)\n    rebornTimeSke: dragonBones.ArmatureDisplay = null;\n\n    @property(cc.AudioSource)\n    timeAudio: cc.AudioSource = null;\n\n    @property(cc.Node)\n    panel: cc.Node = null;\n\n    @property(cc.Node)\n    btnReborn: cc.Node = null;\n\n    @property(cc.Node)\n    btnRestart: cc.Node = null;\n\n    onLoad() {\n        this.scheduleOnce(() => {\n            this.timeAudio.play();\n        }, 1);\n        Utils.playAniCall(this.rebornTimeSke, \"newAnimation\", () => {\n            this.scheduleOnce(() => {\n                this.showLayer();\n            }, 0.8);\n        });\n\n        Common.instance.setBestScore();\n    }\n    isShow = true;\n    start() {\n        EventManager.instance.EventInterstitial();\n        if (lplatform.channel == CHANNEL.qq && this.btnReborn.getChildByName(\"iconAD\")) {\n            this.btnReborn.getChildByName(\"iconAD\").active = this.isShow;\n            this.btnReborn.getComponent(cc.Sprite).enabled = !this.isShow;\n        }\n    }\n\n    onClickRevive() {\n        AudioManager.instance.playClickSound();\n        \n        if (lplatform.channel == CHANNEL.tt) {\n            this.timeAudio.pause();\n            this.rebornTimeSke.timeScale = 0;\n            this.panel.getComponent(cc.Animation).pause();\n            this.btnReborn.getComponent(cc.Animation).pause();\n            this.btnRestart.getComponent(cc.Animation).pause();\n        }\n\n        clientEvent.dispatchEvent(\"reviveEvent\");\n        EventManager.instance.showRewardedVideo(\n            () => {\n                this.timeAudio.resume();\n                this.rebornTimeSke.timeScale = 1;\n                this.panel.getComponent(cc.Animation).resume();\n                this.btnReborn.getComponent(cc.Animation).resume();\n                this.btnRestart.getComponent(cc.Animation).resume();\n\n                this.clean();\n            }\n        );\n    }\n\n    onClickRestart() {\n        AudioManager.instance.playClickSound();\n        \n        GameData.initialData();\n        GameData.blockData = [];\n        GameData.curScore = 0;\n\n        if (GameMode == MODE.TEACH) {\n            if (3 == GameData.teachingXS) {\n                GameData.teachingXS = 0;\n                GameData.saveData();\n            }\n            Common.instance.toGame();\n            this.clean();\n        } else {\n            Common.instance.toGame();\n            this.clean();\n        }\n    }\n\n    showLayer() {\n        if (1 == GameData.isGetBestScore) {\n            Common.instance.showEndBestScoreLayer();\n        } else {\n            Common.instance.showEndScoreLayer();\n        }\n        this.clean();\n    }\n\n    clean() {\n        this.node.destroy();\n        this.timeAudio.stop();\n    }\n}"]}