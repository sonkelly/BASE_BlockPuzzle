{"version":3,"sources":["assets/Scripts/BlockItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class BlockItem extends cc.Component {\n    @property\n    private _hp: number = 0;\n    \n    @property\n    private _type: number = 0;\n    \n    @property\n    private _tag: number = 0;\n    \n    @property(cc.Node)\n    private m_sp_strong: cc.Node = null;\n    \n    @property(cc.Node)\n    private m_sp_hurt: cc.Node = null;\n    \n    private _tostrong: boolean = false;\n\n    onLoad(): void {}\n\n    start(): void {}\n\n    initType(t: number, e: number): void {\n        this._type = t;\n        this._tag = e;\n        \n        if (window['BLOCKLIST'] && window['BLOCKLIST'][t] && window['BLOCKLIST'][t][e]) {\n            this._hp = window['BLOCKLIST'][t][e].hp;\n        }\n        \n        this.node.scale = 1;\n        this.node.opacity = 255;\n        this._tostrong = false;\n        this.m_sp_strong.active = false;\n        this.m_sp_hurt.active = false;\n    }\n\n    showHurt(t: cc.SpriteFrame): void {\n        if (this._type === 1) {\n            this.m_sp_hurt.active = true;\n            this.m_sp_hurt.getComponent(cc.Sprite).spriteFrame = t;\n        }\n    }\n\n    setSpriteFrame(t: cc.SpriteFrame): void {\n        this.node.getComponent(cc.Sprite).spriteFrame = t;\n    }\n\n    getHp(): number {\n        return this._hp;\n    }\n\n    getTag(): number {\n        return this._tag;\n    }\n\n    addStrong(): boolean {\n        if (this._tostrong) {\n            return false;\n        }\n        \n        this._tostrong = true;\n        this._hp = this._hp + this._hp;\n        this.m_sp_strong.scale = 0;\n        this.m_sp_strong.active = true;\n        this.m_sp_strong.stopAllActions();\n        \n        const self = this;\n        this.m_sp_strong.runAction(\n            cc.sequence(\n                cc.scaleTo(0.5, 1, 1).easing(cc.easeIn(2)),\n                cc.callFunc(() => {\n                    self.m_sp_strong.runAction(\n                        cc.repeatForever(\n                            cc.sequence(\n                                cc.scaleTo(0.5, 0.9, 0.9),\n                                cc.scaleTo(0.5, 1, 1)\n                            )\n                        )\n                    );\n                })\n            )\n        );\n        \n        return true;\n    }\n}"]}