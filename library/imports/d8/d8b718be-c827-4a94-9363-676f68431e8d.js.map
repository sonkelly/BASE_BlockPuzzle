{"version":3,"sources":["assets/Scripts/PVivo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass } = cc._decorator;\n\n@ccclass\nexport default class PVivo extends (cc.Class as any) {\n    private env: any;\n    private info: any;\n    private bh: number = 170;\n    private bw: number = 0;\n    private btop: number = 0;\n    private bannerAd: any = null;\n    private bannerAutoShow: boolean = false;\n    private customAd: any = null;\n    private moreGameBanner: any = null;\n    private moreGamePortal: any = null;\n    private rewardedVideoAd: any = null;\n\n    public init(): void {\n        this.env = window['qg'];\n        this.info = (window['lplatform'] && window['lplatform'].systemInfo) || this.env.getSystemInfoSync();\n        this.bh = window['lplatform'].cparam.bannerHeight || 170;\n        this.bw = window['lplatform'].cparam.bannerWidth || Math.min(this.info.windowWidth, 16 * this.bh / 9);\n    }\n\n    public initAD(): void {\n        this.loadInterstitial(false);\n        this.createRewardedVideo(false);\n        setTimeout(() => {\n            this.createMoreGamePortal(false, true);\n        }, 10000);\n    }\n\n    public loadBanner(show: boolean): void {\n        this.hideBanner(true);\n        \n        if (!this.bannerAd) {\n            this.btop = 0;\n            if (window['lplatform'].cparam.bannerOnBottom) {\n                this.btop = this.info.windowHeight - this.bh;\n            }\n            \n            window['lplatform'].plog(`loadBanner this.bh:${this.bh} this.btop:${this.btop} this.bw:${this.bw} lplatform.cparam.bannerID:${window['lplatform'].cparam.bannerID}`);\n            \n            this.bannerAd = this.env.createBannerAd({\n                posId: window['lplatform'].cparam.bannerID,\n                adIntervals: 30,\n                style: {}\n            });\n            \n            this.bannerAd.onLoad(this.onBannerLoad.bind(this));\n            this.bannerAd.onError(this.onBannerError.bind(this));\n            this.bannerAd.onSize(this.onBannerResize.bind(this));\n        }\n        \n        this.bannerAutoShow = show;\n        if (show) {\n            this.bannerAd.show();\n        }\n    }\n\n    public showBanner(): void {\n        this.loadBanner(true);\n    }\n\n    public showVivoInterstitial(): void {\n        console.log(\"showVivoInterstitial\");\n        const ad = window['qg'].createInterstitialAd({\n            posId: window['lplatform'].cparam.interstitialID\n        });\n        \n        ad.onError((error: any) => {\n            console.log(\"插屏广告加载失败\", JSON.stringify(error));\n        });\n        \n        ad.show().then(() => {\n            console.log(\"插屏广告展示完成\");\n            if (this.customAd) {\n                this.customAd.destroy();\n            }\n        }).catch((error: any) => {\n            console.log(\"插屏广告展示失败\", JSON.stringify(error));\n        });\n    }\n\n    public loadInterstitial(show: boolean): void {\n        if (this.customAd) {\n            this.customAd.destroy();\n        }\n        \n        const ad = this.env.createCustomAd({\n            posId: window['lplatform'].cparam.nativeID[0],\n            style: {\n                left: (this.info.windowWidth - 1080) / 2,\n                top: (this.info.windowHeight - 720) / 2\n            }\n        });\n        \n        ad.onLoad(() => {});\n        ad.onError((error: any) => {\n            console.log(\"createCustomAd Error\", JSON.stringify(error));\n            this.showVivoInterstitial();\n        });\n        ad.onClose(() => {\n            this.loadInterstitial(false);\n        });\n        \n        this.customAd = ad;\n        if (show) {\n            this.customAd.show();\n        }\n    }\n\n    public showInterstitial(): void {\n        this.loadInterstitial(true);\n    }\n\n    public createMoreGameBanner(): void {\n        if (window['lplatform'].cparam.moreGameBannerId) {\n            if (!this.moreGameBanner) {\n                this.moreGameBanner = this.env.createBoxBannerAd({\n                    posId: window['lplatform'].cparam.moreGameBannerId\n                });\n                \n                this.moreGameBanner.onError((error: any, info: any) => {\n                    window['lplatform'].plog(`监听事件:${JSON.stringify(error)} ${JSON.stringify(info)}`);\n                });\n            }\n            \n            this.moreGameBanner.show();\n            \n            if (window['lplatform'].cparam.moreGameBannerAutoCloseTime > 0) {\n                setTimeout(() => {\n                    this.moreGameBanner.hide();\n                }, window['lplatform'].cparam.moreGameBannerAutoCloseTime);\n            }\n        }\n    }\n\n    public createMoreGamePortal(destroyPrev: boolean = false, show: boolean = false): void {\n        if (typeof this.env.createBoxPortalAd === 'function') {\n            if (destroyPrev && this.moreGamePortal) {\n                window['lplatform'].plog(\"createMoreGamePortal destroyPrev\");\n                this.moreGamePortal.destroy();\n                this.moreGamePortal = null;\n            }\n            \n            if (!this.moreGamePortal) {\n                const index = Math.floor(Math.random() * window['lplatform'].cparam.spreadBoxID.length);\n                const posId = window['lplatform'].cparam.spreadBoxID[index];\n                \n                window['lplatform'].plog(`createMoreGamePortal:${posId}`);\n                \n                this.moreGamePortal = this.env.createBoxPortalAd({\n                    posId: posId,\n                    image: window['lplatform'].cparam.moreGamePortalIconUrl,\n                    marginTop: window['lplatform'].cparam.moreGamePortalMarginTop\n                });\n            }\n            \n            if (show) {\n                this.moreGamePortal.show().then(() => {}).catch((error: any) => {\n                    window['lplatform'].plog(`createMoreGamePortal show fail:${JSON.stringify(error)}`);\n                });\n            }\n        }\n    }\n\n    public createRewardedVideo(show: boolean): void {\n        if (window['lplatform'].cparam.rewardedVideoID && typeof this.env.createRewardedVideoAd === 'function') {\n            if (!this.rewardedVideoAd) {\n                this.rewardedVideoAd = this.env.createRewardedVideoAd({\n                    posId: window['lplatform'].cparam.rewardedVideoID\n                });\n                \n                this.rewardedVideoAd.onError(this.onRewardedVideoError.bind(this));\n                this.rewardedVideoAd.onClose(this.onRewardedVideoClose.bind(this));\n                this.rewardedVideoAd.onLoad(this.onRewardedVideoLoad.bind(this));\n            }\n            \n            if (show) {\n                this.showRewardedVideo(window['vcb']);\n                cc.audioEngine.setMusicVolume(0);\n                cc.audioEngine.setEffectsVolume(0);\n            }\n        }\n    }\n\n    public goToGameOrGameList(): void {\n        window['lplatform'].plog(\"vivoGame未实现 goToGameOrGameList\");\n    }\n\n    public showFavoriteGuide(): void {\n        this.env.hasShortcutInstalled({\n            success: (result: any) => {\n                if (result === 0) {\n                    this.env.installShortcut({\n                        success: () => {},\n                        fail: () => {},\n                        complete: () => {}\n                    });\n                } else {\n                    this.env.showToast({\n                        message: \"已创建桌面图标\"\n                    });\n                }\n            },\n            fail: () => {},\n            complete: () => {}\n        });\n    }\n\n    public canRecord(): boolean {\n        return false;\n    }\n\n    public canShareRecord(): boolean {\n        return false;\n    }\n\n    public startRecord(): void {}\n\n    public pauseRecord(): void {}\n\n    public resumeRecord(): void {}\n\n    public stopRecord(): void {}\n\n    public shareRecord(data: any, callback?: Function): void {\n        if (callback) {\n            callback();\n        }\n    }\n\n    public resetRecord(): void {}\n\n    public httpRequest(\n        url: string, \n        callback: Function, \n        timeout: number, \n        method: string, \n        data: any, \n        headers: any, \n        dataType: string = \"text\"\n    ): void {\n        this.env.request({\n            url: url,\n            data: data,\n            header: headers,\n            timeout: timeout,\n            method: method,\n            dataType: dataType,\n            success: (response: any) => {\n                callback(null, response.data, response.data);\n            },\n            fail: (error: any) => {\n                callback(error, null, null);\n            }\n        });\n    }\n\n    private onBannerLoad(): void {\n        // Banner广告加载回调\n    }\n\n    private onBannerError(error: any): void {\n        // Banner广告错误回调\n    }\n\n    private onBannerResize(size: any): void {\n        // Banner广告尺寸变化回调\n    }\n\n    private onRewardedVideoError(error: any): void {\n        // 激励视频错误回调\n    }\n\n    private onRewardedVideoClose(): void {\n        // 激励视频关闭回调\n    }\n\n    private onRewardedVideoLoad(): void {\n        // 激励视频加载回调\n    }\n\n    private hideBanner(immediate: boolean): void {\n        if (this.bannerAd) {\n            this.bannerAd.hide();\n        }\n    }\n\n    private showRewardedVideo(callback: Function): void {\n        if (this.rewardedVideoAd) {\n            this.rewardedVideoAd.show();\n        }\n    }\n}"]}