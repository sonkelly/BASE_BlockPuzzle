{"version":3,"sources":["assets/Scripts/ReliveViewCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\nimport { GameBundle } from \"./GameData\";\n\n@ccclass\nexport default class ReliveViewCtrl extends cc.Component {\n\n    @property(cc.Label)\n    Score: cc.Label = null;\n\n    @property(cc.Label)\n    TimeTex: cc.Label = null;\n\n    @property(cc.Label)\n    m_cost_numlabel: cc.Label = null;\n\n    @property\n    TimeNum: number = null;\n\n    @property(cc.Node)\n    skipBtn: cc.Node = null;\n\n    @property(cc.Sprite)\n    m_cost_pic: cc.Sprite = null;\n\n    @property(cc.Node)\n    m_bg: cc.Node = null;\n\n    @property(cc.Node)\n    m_share_relive: cc.Node = null;\n\n    @property(cc.Button)\n    m_btn_share: cc.Button = null;\n\n    @property(cc.Sprite)\n    m_sp_all_gold: cc.Sprite = null;\n\n    @property(cc.Label)\n    m_l_all_gold: cc.Label = null;\n\n    private timeOut: boolean = false;\n    private m_cost_num: number = 0;\n    private callbackobj: any = null;\n\n    start() {\n        this.node.zIndex = 100;\n        this.TimeNum = 10;\n        this.TimeTex.string = this.TimeNum.toString();\n        this.timeOut = false;\n        this.m_cost_num = window['RELIVE_COST_NUM'];\n        \n        let winSize = cc.winSize;\n        this.m_bg.width = winSize.width;\n        this.m_bg.height = winSize.height;\n        \n        let self = this;\n        GameBundle[3].load(\"GameRes3/\" + window['RELIVE_COST_PIC_PATH'], cc.SpriteFrame, function(err: any, spriteFrame: cc.SpriteFrame) {\n            if (err) {\n                cc.error(err.message || err);\n            } else {\n                self.m_cost_pic.spriteFrame = spriteFrame;\n                self.m_sp_all_gold.spriteFrame = spriteFrame;\n            }\n        });\n        \n        this.m_cost_numlabel.string = \"x\" + window['RELIVE_COST_NUM'];\n        this.m_l_all_gold.string = \":\" + window['INIT_GAME_SAVE_DATA'].gold_num;\n        \n        if (window['isWeChatPlatform']) {\n            this.setShareReliveShow(window['SHARE_RELIVE']);\n        }\n    }\n\n    setShareReliveShow(show: number) {\n        this.m_share_relive.active = show !== 0;\n    }\n\n    setCallBackObj(obj: any) {\n        this.callbackobj = obj;\n    }\n\n    ShowView(show: boolean) {\n        this.node.active = show;\n        \n        if (show === true && this.callbackobj && this.callbackobj.shareObj) {\n            if (this.callbackobj.shareObj.is_share_relive) {\n                this.m_btn_share.interactable = false;\n            } else {\n                this.m_btn_share.interactable = true;\n            }\n        }\n        \n        if (show === false) {\n            this.node.destroy();\n        }\n    }\n\n    CountDownClick(time: number) {\n        this.schedule(this.DeleteTimeNum.bind(this), 1, time, 0, true);\n    }\n\n    DeleteTimeNum() {\n        this.TimeNum -= 1;\n        this.TimeTex.string = this.TimeNum.toString();\n        \n        if (this.TimeNum <= -1) {\n            this.TimeTex.string = \"0\";\n            this.ShowView(false);\n            if (this.callbackobj != null) {\n                this.callbackobj.onSkipCallBack();\n            }\n        }\n    }\n\n    CoinBtnClick() {\n        if (this.callbackobj != null && this.callbackobj.onCostRelive(this.m_cost_num)) {\n            this.ShowView(false);\n        }\n    }\n\n    setScoreLabel(score: number) {\n        this.Score.string = score.toString();\n    }\n\n    setCostNumLabel(num: number) {\n        this.m_cost_numlabel.string = \"x\" + num;\n        this.m_cost_num = parseInt(num.toString());\n    }\n\n    ShareBtnClick() {\n        this.unschedule(this.DeleteTimeNum.bind(this));\n    }\n\n    cancelBtnClick() {\n        this.unschedule(this.DeleteTimeNum.bind(this));\n        this.ShowView(false);\n        if (this.callbackobj != null) {\n            this.callbackobj.onSkipCallBack();\n        }\n    }\n}"]}