{"version":3,"sources":["assets/Scripts/PWX.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PWX extends (cc.Class as any) {\n    private env: any;\n    private info: any;\n    private bh: number = 0;\n    private bw: number = 0;\n    private gameRecorderManager: any;\n    private logined: boolean = false;\n    private insterstitialAd: any;\n    private nativeGridAd: any;\n    private gridAd: any;\n    private gameRecordShareBtn: any = null;\n    private moreGamePortal: any = null;\n    private bannerAd: any;\n    private moreGameBanner: any;\n    private recordStartCb: (() => void) | null = null;\n    private recordStopCb: ((videoPath: string | null) => void) | null = null;\n    private videoPath: string | null = null;\n    private gameRecordStartTime: number = 0;\n    private gameRecordStopTime: number = 0;\n    private btop: number = 0;\n\n    public init(): void {\n        this.env = window.wx;\n        this.info = (window.lplatform && (window as any).lplatform.systemInfo) || this.env.getSystemInfoSync();\n        this.bh = (window as any).lplatform.cparam.bannerHeight || 170;\n        this.bw = (window as any).lplatform.cparam.bannerWidth || Math.min(this.info.windowWidth, 16 * this.bh / 9);\n        this.gameRecorderManager = this.env.getGameRecorder();\n        this.createGameClub();\n        this.showShareMenu();\n        this.checkLogin();\n    }\n\n    public initAD(): void {\n        this.loadBanner(false);\n        this.loadInterstitial(false);\n        this.createRewardedVideo(false);\n    }\n\n    private checkLogin(): void {\n        const self = this;\n        this.env.checkSession({\n            success: function() {\n                self.logined = true;\n            },\n            fail: function() {\n                self.env.login({\n                    success: function(t: any) {\n                        if (t.code) {\n                            self.logined = true;\n                        } else {\n                            console.log(\"登录失败！\" + t.errMsg);\n                        }\n                    }\n                });\n            }\n        });\n    }\n\n    public loadInterstitial(show: boolean): void {\n        this.hideInterstitial();\n        if (this.insterstitialAd) {\n            this.insterstitialAd.load();\n        } else {\n            this.insterstitialAd = this.env.createInterstitialAd({\n                adUnitId: (window as any).lplatform.cparam.interstitialID\n            });\n            this.insterstitialAd.onLoad(this.onInterstitialLoad.bind(this));\n            this.insterstitialAd.onError(this.onInterstitialError.bind(this));\n            this.insterstitialAd.onClose(this.onInterstitialClose.bind(this));\n        }\n        if (show) {\n            this.showInterstitial();\n        }\n    }\n\n    private onInterstitialError(): void {}\n\n    private onInterstitialClose(): void {}\n\n    public showInterstitial(): void {\n        const self = this;\n        if (this.insterstitialAd) {\n            this.insterstitialAd.show().catch(function(t: any) {\n                (window as any).lplatform.plog(\"showInterstitial cache:\" + JSON.stringify(t));\n                self.createMoreGamePortal(true, true);\n            });\n        } else {\n            this.loadInterstitial(true);\n        }\n        this.createNativeGridAd();\n    }\n\n    public hideInterstitial(): void {\n        if (this.nativeGridAd) {\n            this.nativeGridAd.hide();\n        }\n    }\n\n    private createGridAd(): void {\n        if (this.gridAd) {\n            this.gridAd.destroy();\n        }\n        const width = this.info.windowWidth - 100;\n        const left = this.info.windowWidth / 2 - width / 2;\n        const top = this.info.windowHeight / 2 - width / 2;\n        \n        this.gridAd = this.env.createGridAd({\n            adUnitId: (window as any).lplatform.cparam.gridID,\n            adIntervals: 30,\n            gridCount: 5,\n            style: {\n                left: left,\n                top: top,\n                width: width,\n                opacity: 0.8\n            }\n        });\n        this.gridAd.show();\n    }\n\n    public showGridAd(): void {\n        if (this.gridAd) {\n            this.gridAd.show();\n        } else {\n            this.createGridAd();\n        }\n    }\n\n    private createNativeGridAd(): void {\n        if (this.nativeGridAd) {\n            this.nativeGridAd.destroy();\n        }\n        const width = this.info.windowWidth;\n        const left = this.info.windowWidth / 2 - width / 2;\n        \n        this.nativeGridAd = (window as any).wx.createCustomAd({\n            adUnitId: (window as any).lplatform.cparam.nativeID,\n            style: {\n                left: left,\n                top: 0,\n                width: width,\n                fixed: true\n            }\n        });\n        this.nativeGridAd.show();\n    }\n\n    public showNativeGridAd(): void {\n        if (this.nativeGridAd) {\n            this.nativeGridAd.show();\n        } else {\n            this.createNativeGridAd();\n        }\n    }\n\n    private createGameClub(): void {\n        this.env.createGameClubButton({\n            icon: \"green\",\n            style: {\n                left: (window as any).lplatform.cparam.gameClubLeft * (window as any).lplatform.systemInfo.windowWidth,\n                top: (window as any).lplatform.cparam.gameClubTop * (window as any).lplatform.systemInfo.windowHeight,\n                width: 40,\n                height: 40\n            }\n        });\n    }\n\n    private showShareMenu(): void {\n        if (typeof this.env.showShareMenu === \"function\") {\n            this.env.showShareMenu({\n                withShareTicket: true,\n                menus: [\"shareAppMessage\", \"shareTimeline\"]\n            });\n        }\n        \n        this.env.onShareAppMessage(() => {\n            return {\n                title: (window as any).lplatform.cparam.shareAppTitle,\n                imageUrl: (window as any).lplatform.uiEngine.getCanvas().toTempFilePathSync({\n                    destWidth: 500,\n                    destHeight: 400\n                })\n            };\n        });\n    }\n\n    public shareAppMessage(): void {\n        this.env.shareAppMessage({\n            title: (window as any).lplatform.cparam.shareAppTitle\n        });\n    }\n\n    public navigateToMiniProgram(): void {}\n\n    public shareMessageToFriend(): void {}\n\n    public showFavoriteGuide(): void {\n        console.log(\"微信未实现showFavoriteGuide\");\n    }\n\n    public subscribeAppMsg(): void {\n        this.env.subscribeAppMsg({\n            tmplIds: (window as any).lplatform.cparam.tmplIds,\n            subscribe: true,\n            success: function(e: any) {\n                console.log(\"----subscribeAppMsg----success\", e);\n            },\n            fail: function(e: any) {\n                console.log(\"----subscribeAppMsg----fail\", e);\n            }\n        });\n    }\n\n    public sendMsgToOpenDataProject(msg: any): void {\n        if (this.logined) {\n            this.env.getOpenDataContext().postMessage(msg);\n        } else {\n            this.checkLogin();\n        }\n    }\n\n    public setUserCloudStorage(data: any): void {\n        this.sendMsgToOpenDataProject({\n            name: \"setUserCloudStorage\",\n            kvdata: data\n        });\n    }\n\n    public canRecord(): boolean {\n        if (!this.gameRecorderManager || !this.gameRecorderManager.isFrameSupported()) {\n            console.log(\"不支持录制游戏画面\");\n            return false;\n        }\n        return true;\n    }\n\n    public startRecord(callback: () => void): void {\n        if (this.canRecord()) {\n            (window as any).lplatform.plog(\"startRecord\");\n            this.recordStartCb = callback;\n            this.videoPath = null;\n            \n            this.gameRecorderManager.start({\n                fps: 24,\n                bitrate: 1000,\n                hookBgm: false,\n                duration: 30\n            });\n            \n            this.gameRecorderManager.on(\"start\", this.onGameRecordStart.bind(this));\n            this.gameRecorderManager.on(\"error\", this.onGameRecordError.bind(this));\n            this.gameRecorderManager.on(\"stop\", this.onGameRecordStop.bind(this));\n            \n            const self = this;\n            this.env.onShow(() => {\n                (window as any).lplatform.plog(\"startRecord this.env.onShow\");\n                self.resumeRecord();\n            });\n            \n            this.env.onHide(() => {\n                (window as any).lplatform.plog(\"startRecord this.env.onHide\");\n                self.pauseRecord();\n            });\n        }\n    }\n\n    private onGameRecordStart(): void {\n        this.gameRecordStartTime = Date.now();\n        if (this.recordStartCb) {\n            this.recordStartCb();\n            this.recordStartCb = null;\n        }\n    }\n\n    private onGameRecordError(error: any): void {\n        (window as any).lplatform.plog(\"onGameRecordError:\" + JSON.stringify(error), \"error\");\n    }\n\n    private onGameRecordStop(): void {\n        (window as any).lplatform.plog(\"onGameRecordStop this.recordStopCb:\" + this.recordStopCb);\n        this.gameRecordStopTime = Date.now();\n        \n        if (this.gameRecordStopTime - this.gameRecordStartTime > 4500) {\n            this.videoPath = \"res.videoPath\";\n        } else {\n            (window as any).lplatform.plog(\"onGameRecordStop 实际录屏时间少于5秒就有可能分享失败\");\n        }\n        \n        if (this.recordStopCb) {\n            this.recordStopCb(this.videoPath);\n            this.recordStopCb = null;\n        }\n    }\n\n    public pauseRecord(): void {\n        this.gameRecorderManager.pause();\n    }\n\n    public resumeRecord(): void {\n        this.gameRecorderManager.resume();\n    }\n\n    public stopRecord(callback: (videoPath: string | null) => void): void {\n        if (this.canRecord()) {\n            (window as any).lplatform.plog(\"stopRecord cb:\" + callback);\n            this.recordStopCb = callback;\n            this.gameRecorderManager.stop();\n        }\n    }\n\n    public shareRecord(): void {\n        this.shareAppMessage();\n    }\n\n    public resetRecord(): void {\n        this.stopRecord(() => {});\n        this.videoPath = null;\n    }\n\n    public shareInnerRecord(): void {}\n\n    public makeShareUI(e: any, t: any, o: any, n: number = 0, a: boolean = false): void {\n        const self = this;\n        \n        (window as any).lplatform.uiEngine.CreateShareK(\n            function() {\n                this.shareRecord(e, t);\n            }.bind(this),\n            function() {\n                if (t) t();\n                if (this.gameRecordShareBtn) {\n                    this.gameRecordShareBtn.hide();\n                }\n            }.bind(this),\n            o, n, a\n        );\n\n        if (!this.gameRecordShareBtn) {\n            this.gameRecordShareBtn = this.env.createGameRecorderShareButton({\n                style: {\n                    left: (window as any).lplatform.cparam.shareRecordBtnLeft * (window as any).lplatform.systemInfo.windowWidth - (window as any).lplatform.systemInfo.windowWidth / 3.5,\n                    top: (window as any).lplatform.cparam.shareRecordBtnTop * (window as any).lplatform.systemInfo.windowHeight - (window as any).lplatform.cparam.shareRecordBtnHeight / 2,\n                    height: (window as any).lplatform.cparam.shareRecordBtnHeight,\n                    color: \"#ffffff\",\n                    textAlign: \"center\",\n                    fontSize: 16,\n                    borderRadius: 4,\n                    iconMarginRight: 16,\n                    paddingLeft: 1,\n                    paddingRight: 30\n                },\n                text: \"分享你的神操作\",\n                share: {\n                    query: \"a=1&b=2\",\n                    bgm: \"bgm.mp3\",\n                    timeRange: [[0, 30000]]\n                }\n            });\n\n            this.gameRecordShareBtn.onTap((e: any) => {\n                console.error(JSON.stringify(e));\n                (window as any).lplatform.uiEngine.closeToYou();\n                this.gameRecordShareBtn.hide();\n            });\n        }\n\n        if ((window as any).lplatform.cparam.showVideoShareBtn) {\n            this.gameRecordShareBtn.show();\n        } else {\n            this.gameRecordShareBtn.hide();\n        }\n    }\n\n    public showBanner(): void {\n        this.hideBanner();\n        if ((window as any).lplatform.labData.mainSwitch) {\n            if (Math.random() <= (window as any).lplatform.cparam.moreGameBannerPercent) {\n                this.createMoreGameBanner();\n            } else {\n                if (this.bannerAd) {\n                    this.bannerAd.show().then(() => {}).catch((e: any) => {\n                        (window as any).lplatform.plog(e);\n                    });\n                } else {\n                    this.loadBanner(true);\n                }\n            }\n        }\n    }\n\n    private createMoreGameBanner(): void {\n        if (typeof this.env.createGameBanner === \"function\") {\n            const randomIndex = Math.floor(Math.random() * (window as any).lplatform.cparam.moreGameBannerAppId.length);\n            const appId = (window as any).lplatform.cparam.moreGameBannerAppId[randomIndex];\n            \n            this.btop = 0;\n            if ((window as any).lplatform.cparam.bannerOnBottom) {\n                this.btop = this.info.windowHeight - 104;\n            }\n            \n            if (this.moreGameBanner) {\n                this.moreGameBanner.destroy();\n            }\n            \n            this.moreGameBanner = this.env.createGameBanner({\n                adUnitId: appId,\n                style: {\n                    left: (this.info.windowWidth - 300) / 2,\n                    top: this.btop\n                }\n            });\n            this.moreGameBanner.show();\n        }\n    }\n\n    private createMoreGamePortal(show: boolean = false, flag: boolean = false): void {}\n\n    public goToGameOrGameList(): void {\n        this.createMoreGamePortal(true, true);\n    }\n\n    public httpRequest(url: string, callback: any, timeout: number, method: string, data: any, headers: any, dataType: string): void {\n        this.env.request({\n            url: url,\n            data: data,\n            header: headers,\n            timeout: timeout,\n            method: method,\n            dataType: dataType,\n            success: function(response: any) {\n                callback(null, response.data, response.data);\n            },\n            fail: function(error: any) {\n                callback(error, null, null);\n            }\n        });\n    }\n\n    private loadBanner(show: boolean): void {\n        // Banner广告加载逻辑\n    }\n\n    private createRewardedVideo(show: boolean): void {\n        // 激励视频广告创建逻辑\n    }\n\n    private hideBanner(): void {\n        // Banner广告隐藏逻辑\n    }\n\n    private onInterstitialLoad(): void {\n        // 插屏广告加载完成回调\n    }\n}"]}