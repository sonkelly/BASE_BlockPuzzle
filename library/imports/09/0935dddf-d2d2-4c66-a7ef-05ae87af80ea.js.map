{"version":3,"sources":["assets/Scripts/PlatformCom.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEAiEC;QA/DW,mBAAa,GAAQ,IAAI,CAAC;QAC1B,cAAQ,GAAY,IAAI,CAAC;QACzB,YAAM,GAAY,IAAI,CAAC;;IA6DnC,CAAC;IA3DG,4BAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACvB,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,2BAAK,GAAL,cAAS,CAAC;IAEV,qCAAe,GAAf,cAAmB,CAAC;IAEpB,yCAAmB,GAAnB;QAAA,iBAgBC;QAfG,IAAI,MAAM,CAAC,gBAAgB,EAAE;YACzB,EAAE,CAAC,sBAAsB,CAAC;gBACtB,QAAQ,EAAE,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,sCAAsC,CAAC;gBAC5D,OAAO,EAAE;oBACL,KAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;gBAClC,CAAC;gBACD,IAAI,EAAE;oBACF,EAAE,CAAC,WAAW,CAAC;wBACX,WAAW,EAAE,wBAAwB;wBACrC,OAAO,EAAE,cAAO,CAAC;wBACjB,IAAI,EAAE,cAAO,CAAC;qBACjB,CAAC,CAAC;gBACP,CAAC;aACJ,CAAC,CAAC;SACN;IACL,CAAC;IAED,qCAAe,GAAf;QACI,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;SAChC;IACL,CAAC;IAED,kCAAY,GAAZ;QACI,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YACtD,IAAI,OAAO,EAAE;gBACT,IAAM,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;gBAC7C,IAAI,KAAK,EAAE;oBACP,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;iBACrB;aACJ;YACD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;SAC9B;IACL,CAAC;IAED,kCAAY,GAAZ,UAAa,IAAY;QACrB,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;YACtD,IAAI,OAAO,EAAE;gBACT,IAAM,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;gBAC7C,IAAI,KAAK,EAAE;oBACP,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;iBACvB;aACJ;YACD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;SAC7B;IACL,CAAC;IAhEgB,WAAW;QAD/B,OAAO;OACa,WAAW,CAiE/B;IAAD,kBAAC;CAjED,AAiEC,CAjEwC,EAAE,CAAC,SAAS,GAiEpD;kBAjEoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PlatformCom extends cc.Component {\n    \n    private m_callbackobj: any = null;\n    private m_rqcode: cc.Node = null;\n    private m_tips: cc.Node = null;\n\n    onLoad() {\n        this.node.zIndex = 100;\n        cc.view.getVisibleSize();\n        this.m_callbackobj = null;\n    }\n\n    start() {}\n\n    onImageBtnClick() {}\n\n    onSaveImageBtnClick() {\n        if (window.isWeChatPlatform) {\n            wx.saveImageToPhotosAlbum({\n                filePath: cc.url.raw(\"resources/common/saveImage.d2e1c.jpg\"),\n                success: () => {\n                    this.showTipsView(\"二维码已保存成功\");\n                },\n                fail: () => {\n                    wx.openSetting({\n                        authSetting: \"scope.writePhotosAlbum\",\n                        success: () => {},\n                        fail: () => {}\n                    });\n                }\n            });\n        }\n    }\n\n    onCloseBtnClick() {\n        if (this.m_rqcode) {\n            this.m_rqcode.active = false;\n        }\n    }\n\n    hideTipsView() {\n        if (this.m_tips) {\n            const tipsTex = this.m_tips.getChildByName(\"TipsTex\");\n            if (tipsTex) {\n                const label = tipsTex.getComponent(cc.Label);\n                if (label) {\n                    label.string = \"\";\n                }\n            }\n            this.m_tips.active = false;\n        }\n    }\n\n    showTipsView(text: string) {\n        if (this.m_tips) {\n            const tipsTex = this.m_tips.getChildByName(\"TipsTex\");\n            if (tipsTex) {\n                const label = tipsTex.getComponent(cc.Label);\n                if (label) {\n                    label.string = text;\n                }\n            }\n            this.m_tips.active = true;\n        }\n    }\n}"]}