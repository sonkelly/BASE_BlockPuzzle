{"version":3,"sources":["assets/Scripts/GameData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { MODE, Property } from \"./Property\";\nexport const GameName = \"Bubble_LocalData\";\nexport const GameBundle = {};\n\nexport class GameData {\n    public static oneToGame: number = 0;\n    public static sceneName: string = null;\n    public static isPause: number = 0;\n    public static audioSwitch: number = 1;\n    public static propBomb: number = 0;\n    public static propRainBow: number = 0;\n    public static xmxx_Hammer: number = 0;\n    public static xmxx_Refresh: number = 0;\n    public static xmxx_Pen: number = 0;\n    public static teachingXS: number = 0;\n    public static teaching: number = 0;\n    public static curScore: number = 0;\n    public static blockData: any[] = [];\n    public static bestScore: { [key: string]: any } = {};\n    public static level: { [key: string]: any } = {};\n    public static modeLock: { [key: string]: any } = {};\n    public static canShowPush: boolean = true;\n    public static pushChangeCount: number = 0;\n    public static isTouch: number = 0;\n    public static pushChange_Time: number = 60;\n    public static pushZJD_autoShow: number = 60;\n    public static isGetBestScore: number = 0;\n    public static isWin: boolean = false;\n    public static isFail: boolean = false;\n    public static push_BlockArr: any[] = [];\n    public static blockIndex: number = 0;\n    public static zjd_Score: number = 0;\n    public static gameDataBind : any;\n\n    public static localData: any = {\n        propBomb: 0,\n        propRainBow: 0,\n        xmxx_Hammer: 0,\n        xmxx_Refresh: 0,\n        xmxx_Pen: 0,\n        teachingXS: 0,\n        teaching: 0,\n        curScore: 0,\n        blockData: [],\n        bestScore: {},\n        level: {},\n        modeLock: {}\n    };\n\n    public static initialData(): void {\n        this.pushChangeCount = 0;\n        this.canShowPush = true;\n        this.isTouch = 0;\n        this.pushChange_Time = Property.PUSH_TIME;\n        this.pushZJD_autoShow = Property.PUSH_ZJD_TIME;\n        this.isGetBestScore = 0;\n        this.isWin = false;\n        this.isFail = false;\n        this.push_BlockArr = [];\n        this.zjd_Score = 0;\n        this.blockIndex = 0;\n        this.saveData();\n        this.resume();\n    }\n\n    public static saveData(): void {\n        for (const key in this.localData) {\n            this.localData[key] = this[key];\n        }\n        const dataStr = JSON.stringify(this.localData);\n        cc.sys.localStorage.setItem(GameName, dataStr);\n    }\n\n    public static loadData(callback?: (success: boolean) => void): void {\n        const dataStr = cc.sys.localStorage.getItem(GameName);\n        if (dataStr === \"\" || dataStr === null) {\n            GameData.saveData();\n            callback && callback(false);\n            return;\n        }\n\n        const data = JSON.parse(dataStr);\n        let needUpdate = false;\n\n        for (const key in data) {\n            this[key] = data[key];\n        }\n\n        if (data.propBomb === null) {\n            this.propBomb = 0;\n            needUpdate = true;\n        }\n        if (data.propRainBow === null) {\n            this.propRainBow = 0;\n            needUpdate = true;\n        }\n        if (data.xmxx_Hammer === null) {\n            this.xmxx_Hammer = 0;\n            needUpdate = true;\n        }\n        if (data.xmxx_Refresh === null) {\n            this.xmxx_Refresh = 0;\n            needUpdate = true;\n        }\n        if (data.xmxx_Pen === null) {\n            this.xmxx_Pen = 0;\n            needUpdate = true;\n        }\n\n        if (data.modeLock && data.modeLock[MODE.KILL] === null) {\n            this.modeLock[MODE.KILL] = 1;\n            needUpdate = true;\n        }\n        if (data.modeLock && data.modeLock[MODE.JIUJIU2] === null) {\n            this.modeLock[MODE.JIUJIU2] = 1;\n            needUpdate = true;\n        }\n        if (data.modeLock && data.modeLock[MODE.STAR2] === null) {\n            this.modeLock[MODE.STAR2] = 1;\n            needUpdate = true;\n        }\n\n        if (!this.level[MODE.JIUJIU2]) {\n            this.level[MODE.JIUJIU2] = 1;\n            this.bestScore[MODE.JIUJIU2] = {};\n            const level = this.level[MODE.JIUJIU2];\n            this.bestScore[MODE.JIUJIU2][level] = 0;\n            needUpdate = true;\n        }\n\n        if (needUpdate) {\n            this.saveData();\n        }\n\n        callback && callback(true);\n    }\n\n    public static setBestScore(mode: string, score: number): void {\n        const currentLevel = this.level[mode];\n        this.bestScore[mode][currentLevel] = score;\n        this.saveData();\n    }\n\n    public static getBestScore(mode: string): number {\n        const currentLevel = this.level[mode];\n        return this.bestScore[mode][currentLevel] || 0;\n    }\n\n    public static pause(): void {\n        this.isPause = 1;\n    }\n\n    public static resume(): void {\n        this.isPause = 0;\n    }\n}"]}