{"version":3,"sources":["assets/Scripts/StartScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\nimport { CHANNEL } from \"./PlatformA\";\nimport EventManager from \"./EventManager\";\nimport Common from \"./Common\";\nimport { MODE } from \"./Property\";\nimport { GameData, GameBundle } from \"./GameData\";\n\n@ccclass\nexport default class StartScene extends cc.Component {\n    @property({\n        type: cc.Integer,\n        tooltip: \"分包个数\"\n    })\n    subPackCount: number = 2;\n\n    private subPackIndex: number = 0;\n\n    onLoad() {\n        this.subPackIndex = 0;\n        \n        GameData.loadData((error: any) => {\n            if (!error) {\n                for (let modeKey in MODE) {\n                    GameData.bestScore[MODE[modeKey]] = {};\n                    GameData.level[MODE[modeKey]] = 1;\n                }\n                \n                GameData.modeLock[MODE.JINGDIAN] = 1;\n                \n                if (lplatform.channel === CHANNEL.oppo || lplatform.channel === CHANNEL.vivo) {\n                    GameData.modeLock[MODE.JIUJIU] = 1;\n                    GameData.modeLock[MODE.JIUGONG] = 1;\n                    GameData.modeLock[MODE.JIEMI] = 1;\n                    GameData.modeLock[MODE.CHUANGGUAN] = 1;\n                    GameData.modeLock[MODE.STAR] = 1;\n                }\n                \n                GameData.saveData();\n            }\n        });\n        \n        this.loadSubPack(this.subPackIndex);\n    }\n\n    private loadSubPack(index: number): void {\n        const bundleName = `GameRes${index + 1}`;\n        \n        cc.assetManager.loadBundle(bundleName, (err: Error, bundle: cc.AssetManager.Bundle) => {\n            if (err) {\n                console.log(err);\n            }\n            \n            GameBundle[this.subPackIndex + 1] = bundle;\n            this.subPackIndex++;\n            \n            if (this.subPackIndex === this.subPackCount) {\n                this.loadFinish();\n            } else {\n                this.loadSubPack(this.subPackIndex);\n            }\n            \n            cc.director.preloadScene(\"game_jingdian\");\n        });\n    }\n\n    private loadFinish(): void {\n        EventManager.instance.EventLoad();\n        Common.instance.toMenu();\n    }\n}"]}