{"version":3,"sources":["assets/Scripts/UseToolItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAA6C;AAC7C,uCAAsC;AAEhC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEAgGC;QA9FG,eAAS,GAAc,IAAI,CAAC;QAG5B,aAAO,GAAY,IAAI,CAAC;QAGxB,UAAI,GAAW,CAAC,CAAC;QAGjB,mBAAa,GAAc,EAAE,CAAC;QAG9B,kBAAY,GAAY,IAAI,CAAC;QAErB,iBAAW,GAAY,KAAK,CAAC;QAC7B,eAAS,GAAQ,IAAI,CAAC;;IA+ElC,CAAC;IA7EG,2BAAK,GAAL;QACI,wBAAa,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACtE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;IACtE,CAAC;IAED,kCAAY,GAAZ,UAAa,GAAW,EAAE,CAAS;QAC/B,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,kCAAY,GAAZ;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED,gCAAU,GAAV;QACI,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,mBAAQ,CAAC,YAAY,CAAC,EAAE;YAC/D,mBAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YACpC,IAAI,CAAC,YAAY,EAAE,CAAC;SACvB;IACL,CAAC;IAED,kCAAY,GAAZ,UAAa,CAAM,EAAE,CAAM;QACvB,IAAM,CAAC,GAAG,IAAI,CAAC;QACf,SAAS,CAAC,oBAAoB,CAAC;YAC3B,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iCAAW,GAAX;QACI,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAChC,IAAI,mBAAQ,CAAC,YAAY,EAAE;YACvB,mBAAQ,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC;SAC1C;IACL,CAAC;IAED,gCAAU,GAAV,UAAW,CAAS;QAChB,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,IAAI,CAAC,IAAI,MAAM,CAAC,UAAU,EAAE;gBACxB,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC;gBACzB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;gBAClE,IAAI,CAAC,WAAW,EAAE,CAAC;aACtB;iBAAM;gBACH,CAAC,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;aACjC;YACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;IACL,CAAC;IAED,gCAAU,GAAV;QACI,IAAI,MAAM,CAAC,mBAAmB,CAAC,QAAQ,IAAI,EAAE,EAAE;YAC3C,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAChC,MAAM,CAAC,mBAAmB,CAAC,QAAQ,IAAI,EAAE,CAAC;YAC1C,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChD,IAAI,mBAAQ,CAAC,YAAY,EAAE;gBACvB,mBAAQ,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC;aAC1C;SACJ;aAAM;YACH,CAAC,CAAC,YAAY,CAAC,gBAAgB,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACpE;IACL,CAAC;IAED,+BAAS,GAAT;QACI,wBAAa,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACtD,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YACzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACzB;IACL,CAAC;IAED,gCAAU,GAAV;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,CAAC,CAAC,eAAe,CAAC;YACd,KAAK,EAAE,+DAA+D;YACtE,QAAQ,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;SAClC,CAAC,CAAC;IACP,CAAC;IA7FD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACQ;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACM;IAGxB;QADC,QAAQ;6CACQ;IAGjB;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;sDACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACW;IAdZ,WAAW;QAD/B,OAAO;OACa,WAAW,CAgG/B;IAAD,kBAAC;CAhGD,AAgGC,CAhGwC,EAAE,CAAC,SAAS,GAgGpD;kBAhGoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["import EventListener from \"./event_listener\";\nimport { Property } from \"./Property\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UseToolItem extends cc.Component {\n    @property(cc.Sprite)\n    m_sp_tool: cc.Sprite = null;\n\n    @property(cc.Node)\n    m_n_get: cc.Node = null;\n\n    @property\n    _tag: number = 0;\n\n    @property([cc.Node])\n    m_sp_desclist: cc.Node[] = [];\n\n    @property(cc.Node)\n    m_n_shareget: cc.Node = null;\n\n    private _onshowback: boolean = false;\n    private m_videoAd: any = null;\n\n    start() {\n        EventListener.instance.on(window.ON_SHOW_BACK, this.onshowback, this);\n        this.m_n_shareget.active = window.BOX_SHARE && !window.firstshare;\n    }\n\n    initToolInfo(tag: number, e: number) {\n        this._tag = tag;\n        this.m_n_get.active = e <= 0;\n    }\n\n    onCloseClick() {\n        this.node.active = false;\n    }\n\n    onUseClick() {\n        if (this._tag === 0 || (this._tag === 1 && Property.GAME_CONTROL)) {\n            Property.GAME_CONTROL.onUseStrong();\n            this.onCloseClick();\n        }\n    }\n\n    onAdBtnClick(t: any, e: any) {\n        const i = this;\n        lplatform.showRanRewardedVideo(function() {\n            i.videoReward(e);\n        });\n    }\n\n    videoReward() {\n        window.INIT_GAME_SAVE_DATA.tool[this._tag] += 1;\n        o.showGetItem(1, 0, null, 0, 0);\n        if (Property.GAME_CONTROL) {\n            Property.GAME_CONTROL.updateToolsNum();\n        }\n    }\n\n    onshowback(t: number) {\n        if (this._onshowback) {\n            if (t >= window.SHARE_TIME) {\n                window.firstshare = true;\n                this.m_n_shareget.active = window.BOX_SHARE && !window.firstshare;\n                this.videoReward();\n            } else {\n                n.default.showShareFailTips();\n            }\n            this._onshowback = false;\n        }\n    }\n\n    onGetClick() {\n        if (window.INIT_GAME_SAVE_DATA.gold_num >= 20) {\n            o.showGetItem(1, 0, null, 0, 0);\n            window.INIT_GAME_SAVE_DATA.gold_num -= 20;\n            window.INIT_GAME_SAVE_DATA.tool[this._tag] += 1;\n            if (Property.GAME_CONTROL) {\n                Property.GAME_CONTROL.updateToolsNum();\n            }\n        } else {\n            o.showTipsText(\"no enough gold\", null, 0, 0, 60, cc.Color.WHITE);\n        }\n    }\n\n    onDestroy() {\n        EventListener.instance.off(window.ON_SHOW_BACK, this);\n        if (this.m_videoAd) {\n            this.m_videoAd.destroy();\n            this.m_videoAd = null;\n        }\n    }\n\n    onShareGet() {\n        this._onshowback = true;\n        c.shareAppMessage({\n            title: \"Hold this bomb, it's about to explode! It's about to explode!\",\n            imageUrl: window.tempFileURL[3]\n        });\n    }\n}"]}