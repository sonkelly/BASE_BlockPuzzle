{"version":3,"sources":["assets/Scripts/ShapeItem.ts"],"names":[],"mappings":"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C,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACxD,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YAClE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YAClE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YAC9D,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YAC9D,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACpF,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACpG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC5E,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACxF,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC5F,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAChG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACxF,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACxF,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7E,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC5F,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC1E,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC1E,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAChE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YACjE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\nimport GameMain from \"./GameMain\";\nimport { Utils3 } from \"./Utils3\";\n@ccclass\nexport default class ShapeItem extends cc.Component {\n    @property(cc.SpriteAtlas)\n    m_spa_blocklist: cc.SpriteAtlas = null;\n\n    @property(GameMain)\n    GameLayer: any = null;\n\n    private _bg_color: string = \"\";\n    private _type_index: number = 0;\n    private _colorindex: number = 1;\n    private _blockcount: number = 0;\n    private _next: number = null;\n    private _data: any = null;\n    private _checkFrameList: cc.Node[] = [];\n    private _checkFKlist: cc.Node[] = [];\n\n    private static readonly COLORS: string[] = [\"#ffffff\", \"#f9bd1d\", \"#003DFF\", \"#85d546\", \"#D6309A\"];\n\n    start() {\n        this._bg_color = \"\";\n        this._type_index = 0;\n        this._colorindex = 1;\n        \n        if (window['INIT_GAME_SAVE_DATA'].top_level < 1 && !window['GUIDE_LEVEL']) {\n            this.resetBlock(22);\n            this.GameLayer.showGuide();\n        } else {\n            this.resetBlock();\n        }\n        \n        this.addTouchEvent();\n        this._blockcount = 0;\n    }\n\n    updateIndex(updateSprite: boolean): number {\n        const skinData = window['INIT_GAME_SAVE_DATA'].skin;\n        \n        for (let i = 0; i < skinData.length; i++) {\n            if (skinData[i] >= 2) {\n                this._type_index = i;\n                break;\n            }\n        }\n\n        this._data = window['SKIN_CONFIG'][this._type_index];\n\n        if (updateSprite) {\n            const shapeNode = this.node.getChildByName(\"n_shape\");\n            if (shapeNode) {\n                for (let i = 0; i < shapeNode.childrenCount; i++) {\n                    const sprite = shapeNode.children[i].getComponent(cc.Sprite);\n                    sprite.spriteFrame = this.m_spa_blocklist.getSpriteFrame(this._data.name + this._colorindex);\n                }\n            }\n        }\n\n        return this._type_index;\n    }\n\n    getTheConfig(): cc.Vec2[][] {\n        const t = 109.77249200050075;\n        const e = 110;\n        const i = Math.cos(60 * Math.PI / 180);\n        const n = Math.sin(60 * Math.PI / 180);\n        const o = Math.cos(120 * Math.PI / 180);\n        const c = Math.sin(120 * Math.PI / 180);\n        const s = Math.cos(300 * Math.PI / 180);\n        const a = Math.sin(300 * Math.PI / 180);\n\n        return [\n            [cc.v2(0, 0)],\n            [cc.v2(0, 0), cc.v2(e, 0), cc.v2(220, 0), cc.v2(330, 0)],\n            [cc.v2(0, 0), cc.v2(e, 0), cc.v2(220, 0), cc.v2(e + i * t, n * t)],\n            [cc.v2(0, 0), cc.v2(e, 0), cc.v2(220, 0), cc.v2(e + s * t, a * t)],\n            [cc.v2(0, 0), cc.v2(e, 0), cc.v2(220, 0), cc.v2(i * t, n * t)],\n            [cc.v2(0, 0), cc.v2(e, 0), cc.v2(220, 0), cc.v2(s * t, a * t)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t * 2, n * t * 2), cc.v2(o * t, c * t)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t * 2, n * t * 2), cc.v2(o * t + i * t, c * t + n * t)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t * 2, n * t * 2), cc.v2(e, 0)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t * 2, n * t * 2), cc.v2(i * t + e, n * t)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t * 2, n * t * 2), cc.v2(i * t * 3, n * t * 3)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(o * t * 2, c * t * 2), cc.v2(o * t * 2 + e, c * t * 2)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(o * t * 2, c * t * 2), cc.v2(o * t - e, c * t)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(o * t * 2, c * t * 2), cc.v2(o * t + e, c * t)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(o * t * 2, c * t * 2), cc.v2(-e, 0)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(o * t * 2, c * t * 2), cc.v2(o * t * 3, c * t * 3)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(i * t + e, n * t), cc.v2(220, 0)],\n            [cc.v2(0, 0), cc.v2(s * t, a * t), cc.v2(s * t + e, a * t), cc.v2(220, 0)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(0, 190), cc.v2(e, 190)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(0, 190), cc.v2(-e, 190)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(0, 190), cc.v2(e, 0)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(0, 190), cc.v2(-e, 0)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(0, 190), cc.v2(s * t, 190 + a * t)],\n            [cc.v2(0, 0), cc.v2(i * t, n * t), cc.v2(e, 0), cc.v2(i * t + e, n * t)],\n            [cc.v2(0, 0), cc.v2(o * t, c * t), cc.v2(-e, 0), cc.v2(o * t - e, c * t)]\n        ];\n    }\n\n    newOneK(colorIndex: number): cc.Node {\n        const node = new cc.Node(\"colorSpr\");\n        node['colorIndex'] = colorIndex;\n        node['colorName'] = this._data.name;\n        \n        const sprite = node.addComponent(cc.Sprite);\n        sprite.spriteFrame = this.m_spa_blocklist.getSpriteFrame(this._data.name + colorIndex);\n        \n        return node;\n    }\n\n    getCurColorIndex(): number {\n        return this._colorindex;\n    }\n\n    createItem(typeIndex?: number): cc.Node {\n        this._blockcount++;\n        if (this._blockcount >= 5) {\n            this._next = 0;\n            this._blockcount = 0;\n        }\n\n        if (typeof this._next === 'number' && !typeIndex) {\n            typeIndex = this._next;\n            this._next = null;\n            if (typeIndex === 0) {\n                this._blockcount = 0;\n            }\n        }\n\n        const shapeNode = new cc.Node(\"n_shape\");\n        const configs = this.getTheConfig();\n        let configIndex = Utils3.random(0, configs.length);\n\n        if (typeof typeIndex === 'number' && typeIndex >= 0) {\n            configIndex = typeIndex;\n        }\n\n        if (configIndex === 0) {\n            this._blockcount = 0;\n        }\n\n        const shapeConfig = configs[configIndex];\n        const colorIndex = Utils3.random(1, 5);\n        \n        this._bg_color = ShapeItem.COLORS[colorIndex];\n        this._colorindex = colorIndex;\n\n        let totalX = 0;\n        let countX = 0;\n        let totalY = 0;\n        let countY = 0;\n\n        for (let i = 0; i < shapeConfig.length; i++) {\n            const pos = shapeConfig[i];\n            const blockNode = this.newOneK(colorIndex);\n            \n            blockNode.x = pos.x;\n            totalX += blockNode.x;\n            countX++;\n            \n            blockNode.y = pos.y;\n            totalY += blockNode.y;\n            countY++;\n            \n            shapeNode.addChild(blockNode);\n        }\n\n        shapeNode.setScale(0.5);\n        shapeNode.x = -totalX / countX * 0.5;\n        shapeNode.y = -totalY / countY * 0.5;\n\n        return shapeNode;\n    }\n\n    addTouchEvent() {\n        const self = this;\n        \n        this.node['ox'] = this.node.x;\n        this.node['oy'] = this.node.y;\n\n        this.node.on(cc.Node.EventType.TOUCH_START, function() {\n            this.node.y += 130;\n            Utils3.SetSoundEffect(window['BUTTON_CLICK_MUSIC'], false, 0.8);\n            this.node.getChildByName(\"n_shape\").setScale(1);\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event: cc.Event.EventTouch) {\n            const delta = event.touch.getDelta();\n            this.node.x += delta.x;\n            this.node.y += delta.y;\n            \n            self.collisionFunc();\n            \n            if (self.checkIsCanDrop()) {\n                self.changeColorDeal();\n            } else {\n                self.changeColorDeal(true);\n            }\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function() {\n            this.dropDownFunc();\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_END, function() {\n            this.dropDownFunc();\n        }, this);\n    }\n\n    checkIsCanDrop(): boolean {\n        if (!this._checkFrameList || this._checkFrameList.length === 0 || \n            this._checkFrameList.length !== this.node.children[0].children.length) {\n            return false;\n        }\n\n        for (let i = 0; i < this._checkFrameList.length; i++) {\n            if (this._checkFrameList[i]['isHaveFK']) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    changeColorDeal(reset: boolean = false) {\n        const mapArray = this.GameLayer.m_maparray;\n        \n        for (let i = 0; i < mapArray.length; i++) {\n            mapArray[i].getComponent(\"BlockBGItem\").setBrightVisible(false);\n        }\n\n        if (!reset) {\n            for (let i = 0; i < this._checkFrameList.length; i++) {\n                this._checkFrameList[i].getComponent(\"BlockBGItem\").setBrightVisible(true, this._bg_color);\n            }\n        }\n    }\n\n    collisionFunc() {\n        this._checkFrameList = [];\n        this._checkFKlist = [];\n        \n        const shapeChildren = this.node.children[0].children;\n        \n        for (let i = 0; i < shapeChildren.length; i++) {\n            const childPos = cc.v2(this.node.children[0].x, this.node.children[0].y)\n                .add(cc.v2(shapeChildren[i].x, shapeChildren[i].y));\n            \n            const worldPos = this.node.position.add(childPos);\n            const frameNode = this.checkPosFunc(worldPos);\n            \n            if (frameNode) {\n                this._checkFKlist.push(shapeChildren[i]);\n                this._checkFrameList.push(frameNode);\n            }\n        }\n    }\n\n    checkPosFunc(position: cc.Vec2): cc.Node {\n        const mapArray = this.GameLayer.m_maparray;\n        \n        for (let i = 0; i < mapArray.length; i++) {\n            const node = mapArray[i];\n            if (cc.v2(node.x, node.y).sub(position).mag() <= 52) {\n                return node;\n            }\n        }\n        \n        return null;\n    }\n\n    dropDownFunc() {\n        if (this.checkIsCanDrop()) {\n            for (let i = 0; i < this._checkFKlist.length; i++) {\n                this._checkFKlist[i].x = 0;\n                this._checkFKlist[i].y = 0;\n                this._checkFKlist[i].parent = this._checkFrameList[i];\n                this._checkFrameList[i]['isHaveFK'] = true;\n                \n                this._checkFKlist[i].runAction(cc.sequence(\n                    cc.scaleTo(0.1, 1.1, 0.8),\n                    cc.scaleTo(0.15, 0.9, 1.1),\n                    cc.scaleTo(0.015, 1.1, 0.9),\n                    cc.scaleTo(0.2, 1, 1)\n                ));\n            }\n\n            this.GameLayer.hideGuide();\n            this.node.removeAllChildren();\n            \n            const newShape = this.createItem();\n            this.node.addChild(newShape);\n            \n            Utils3.SetSoundEffect(window['BUTTON_CLICK_MUSIC'], false, 0.8);\n            this.GameLayer.addScore(this._checkFKlist.length, true);\n            this.GameLayer.checkClearUp();\n            this.takeBack();\n            this.GameLayer.checkIsLose();\n        } else {\n            this.takeBack();\n        }\n    }\n\n    takeBack() {\n        this._checkFrameList = [];\n        this.changeColorDeal(true);\n        this.node.getChildByName(\"n_shape\").setScale(0.5);\n        this.node.x = this.node['ox'];\n        this.node.y = this.node['oy'];\n    }\n\n    checkIsLose(): boolean {\n        let validPositions = 0;\n        const shapeChildren = this.node.children[0].children;\n        \n        for (let i = 0; i < this.GameLayer.m_maparray.length; i++) {\n            const mapNode = this.GameLayer.m_maparray[i];\n            const mapPos = cc.v2(mapNode.x, mapNode.y);\n            let validCount = 1;\n            \n            if (!mapNode['isHaveFK']) {\n                for (let j = 1; j < shapeChildren.length; j++) {\n                    const childWorldPos = mapPos.add(cc.v2(shapeChildren[j].x, shapeChildren[j].y));\n                    \n                    for (let k = 0; k < this.GameLayer.m_maparray.length; k++) {\n                        const checkNode = this.GameLayer.m_maparray[k];\n                        if (cc.v2(checkNode.x, checkNode.y).sub(childWorldPos).mag() <= 52 && \n                            !checkNode['isHaveFK']) {\n                            validCount++;\n                        }\n                    }\n                }\n                \n                if (validCount === shapeChildren.length) {\n                    validPositions++;\n                }\n            }\n        }\n        \n        return validPositions === 0;\n    }\n\n    resetBlock(typeIndex?: number) {\n        this.node.removeAllChildren();\n        this.updateIndex(false);\n        \n        const newShape = this.createItem(typeIndex);\n        this.node.addChild(newShape);\n    }\n\n    setNextBlock(nextIndex: number) {\n        this._next = nextIndex;\n    }\n}"]}